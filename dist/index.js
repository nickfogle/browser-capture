var JSCapture=JSCapture||function(){"use strict";function e(e){n(e),i(function(){"function"==typeof e.done&&setTimeout(function(){t(e),e.done(g.toDataURL())},e.delay)},e)}function t(e){var t=g.getContext("2d");g.width=e.width*e.scale,g.height=e.height*e.scale,e.process.forEach(function(e){e(t,g)}),t.drawImage(y,-e.x*e.scale,-e.y*e.scale,f*e.scale,l*e.scale)}function n(e){var t=Object.keys(v);return t.forEach(function(t){e[t]=e[t]||v[t]}),e}function i(e,t){h?e(m):navigator.getUserMedia({video:{mandatory:{chromeMediaSource:"screen",maxWidth:f,maxHeight:l,minWidth:f,minHeight:l}}},function(n){m=n,h=!0,g=a("canvas",t),y=a("video",t),y.src=URL.createObjectURL(n),y.oncanplay=function(){e(n)}},t.fail)}function a(e,t){var n=p[e]||document.createElement(e);return document.body.appendChild(n),n.width=f*t.scale,n.height=l*t.scale,n.style.position="absolute",n.style.top=-l*t.scale+"px",n.style.left=-f*t.scale+"px","video"===e&&n.setAttribute("autoplay",!0),n}function o(e){if(n(e),"undefined"==typeof Whammy)throw new Error("Whammy is required as dependency for screen recording");i(function(){d=new Whammy.Video(e.frameRate),s=!0,setTimeout(function(){c(0,1/e.frameRate*1e3,e)},e.delay)},e)}function c(e,n,i){return e>=i.duration?r(i.done):(t(i),setTimeout(function(){d.add(g)},0),void setTimeout(function(){c(e+n,n,i)},n))}function r(e){if(s){var t=d.compile();s=!1,"function"==typeof e&&e(t)}}function u(){return s}var d,s=!1,f=screen.availWidth,l=screen.availHeight,h=!1,m=null,y=null,g=null,p={},v={delay:0,x:0,y:0,width:f,height:l,scale:1,done:function(){},process:[],duration:1/0,frameRate:32,fail:function(){}};return navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia,{capture:e,record:o,stopRecording:r,isRecording:u}}();